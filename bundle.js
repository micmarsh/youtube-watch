!function r(i,s,o){function u(e,t){if(!s[e]){if(!i[e]){var n="function"==typeof require&&require;if(!t&&n)return n(e,!0);if(c)return c(e,!0);throw(n=new Error("Cannot find module '"+e+"'")).code="MODULE_NOT_FOUND",n}n=s[e]={exports:{}},i[e][0].call(n.exports,function(t){return u(i[e][1][t]||t)},n,n.exports,r,i,s,o)}return s[e].exports}for(var c="function"==typeof require&&require,t=0;t<o.length;t++)u(o[t]);return u}({1:[function(t,e,n){const r=t("@most/core"),i=t("@most/scheduler"),s=t("./youtube"),o=t("./peer"),u=new URLSearchParams(window.location.search);var c=u.get("videoId"),h=u.get("hostId"),a=localStorage.myPeerId,t=s.createPlayer("player",c);const p=h?o.connectToHost({hostId:h,peerId:a}):o.createNewPeer(a);p.then(t=>localStorage.myPeerId=t.peerId);var f=i.newDefaultScheduler(),l=t=>r.runEffects(t,f);Promise.all([t,p]).then(([t,e])=>{var n=r.tap(e.send,t.events),t=r.tap(t.trigger,e.messages);l(n),l(t),console.log("Connection url",(e=e.peerId,location.protocol+"//"+location.host+location.pathname+"?videoId="+c+"&hostId="+e))},console.error),window.yt=s,window.pr=o},{"./peer":7,"./youtube":8,"@most/core":3,"@most/scheduler":6}],2:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(t,n){return t.forEach(function(t){var e=t.sink;return function(e,t,n){try{n.event(e,t)}catch(t){n.error(e,t)}}(t.scheduler.currentTime(),n,e)})},i=(s.prototype.run=function(t,e){e={sink:t,scheduler:e};return this.sinks.push(e),new o(e,this.sinks)},s);function s(t){this.sinks=t}var o=(u.prototype.dispose=function(){var t=this.sinks.indexOf(this.sink);0<=t&&this.sinks.splice(t,1)},u);function u(t,e){this.sink=t,this.sinks=e}n.createAdapter=function(){var e=[];return[function(t){return r(e,t)},new i(e)]},n.FanoutPortStream=i,n.RemovePortDisposable=o},{}],3:[function(t,e,n){var r,i;r=this,i=function(t,i,o,h){"use strict";var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function e(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function s(t){setTimeout(n,0,t)}function n(t){throw t}function u(t,e,n){return new v(t,e,n)}function c(t,e){return new k(t,e)}function a(t){return new b(t)}function p(t,e){return new _(t,e)}var f=(l.prototype.dispose=function(){this.active=!1},l.prototype.run=function(t){this.active&&this.runIfActive(t)},l.prototype.error=function(t,e){if(!this.active)return s(e);this.sink.error(t,e)},l);function l(t){this.sink=t,this.active=!0}var d,v=(e(y,d=f),y.prototype.runIfActive=function(t){this.runEvent(t,this.value,this.sink)},y);function y(t,e,n){n=d.call(this,n)||this;return n.runEvent=t,n.value=e,n}var m,k=(e(w,m=f),w.prototype.runIfActive=function(t){this.sink.event(t,this.value)},w);function w(t,e){e=m.call(this,e)||this;return e.value=t,e}var g,b=(e(T,g=f),T.prototype.runIfActive=function(t){this.sink.end(t)},T);function T(){return null!==g&&g.apply(this,arguments)||this}var A,_=(e(x,A=f),x.prototype.runIfActive=function(t){this.sink.error(t,this.value)},x);function x(t,e){e=A.call(this,e)||this;return e.value=t,e}function E(){return M}function I(t){return t===M}function P(t){return t.some(I)}function D(){}var M=new(D.prototype.run=function(t,e){return o.asap(a(t),e)},D);function C(){}function R(t,e){return new N(t,e)}var O=new(C.prototype.run=function(){return h.disposeNone()},C),N=(B.prototype.run=function(t,e){return o.delay(this.time,u(S,this.value,t),e)},B);function B(t,e){this.time=t,this.value=e}function S(t,e,n){n.event(t,e),n.end(t)}function q(t){return R(0,t)}var j=(L.prototype.run=function(t,e){return o.periodic(this.period,c(void 0,t),e)},L);function L(t){this.period=t}var V=function(t){this.run=t},W=(F.prototype.setDisposable=function(t){if(void 0!==this.disposable)throw new Error("setDisposable called more than once");this.disposable=t,this.disposed&&t.dispose()},F.prototype.dispose=function(){this.disposed||(this.disposed=!0,void 0!==this.disposable&&this.disposable.dispose())},F);function F(){this.disposable=void 0,this.disposed=!1}var H=i.curry2(function(s,o){return new Promise(function(t,e){return n=s,r=o,i=t,t=e,e=new W,t=new z(i,t,e),void e.setDisposable(n.run(t,r));var n,r,i})});var z=(U.prototype.event=function(){},U.prototype.end=function(){this.active&&this.dispose(this._error,this._end,void 0)},U.prototype.error=function(t,e){this.dispose(this._error,this._error,e)},U.prototype.dispose=function(t,e,n){this.active=!1,function(e,t,n,r){try{r.dispose()}catch(t){return e(t)}t(n)}(t,e,n,this._disposable)},U);function U(t,e,n){this._end=t,this._error=e,this._disposable=n,this.active=!0}function Y(t,e,n){return n.run(t,e)}var G=(J.prototype.event=function(t,e){this.sink.event(t+this.offset,e)},J.prototype.error=function(t,e){this.sink.error(t+this.offset,e)},J.prototype.end=function(t){this.sink.end(t+this.offset)},J);function J(t,e){this.sink=e,this.offset=t}function K(t,e){return new Q(t,e)}var Q=(X.prototype.run=function(t,e){return this.source.run(Z(this.origin,t),o.schedulerRelativeTo(this.origin,e))},X);function X(t,e){this.origin=t,this.source=e}var Z=function(t,e){return e instanceof G?new G(t+e.offset,e.sink):new G(t,e)},$=(tt.prototype.end=function(t){return this.sink.end(t)},tt.prototype.error=function(t,e){return this.sink.error(t,e)},tt);function tt(t){this.sink=t}var et=(nt.prototype.run=function(t,e){return this.source.run(new it(this.step,this.seed,t),e)},nt);function nt(t,e,n){this.step=t,this.seed=e,this.source=n}var rt,it=(e(st,rt=$),st.prototype.event=function(t,e){e=this.step(this.seed,e);this.seed=e.seed,this.sink.event(t,e.value)},st);function st(t,e,n){n=rt.call(this,n)||this;return n.step=t,n.seed=e,n}var ot=(ut.prototype.run=function(t,e){var n=o.asap(c(this.value,t),e),e=this.source.run(new ht(this.f,this.value,t),e);return h.disposeBoth(n,e)},ut);function ut(t,e,n){this.source=n,this.f=t,this.value=e}var ct,ht=(e(at,ct=$),at.prototype.event=function(t,e){var n=this.f;this.value=n(this.value,e),this.sink.event(t,this.value)},at);function at(t,e,n){n=ct.call(this,n)||this;return n.f=t,n.value=e,n}function pt(t,e){return new ft(t,e)}var ft=(lt.prototype.run=function(t,e){return new vt(this.f,this.source,t,e)},lt);function lt(t,e){this.f=t,this.source=e}var dt,vt=(e(yt,dt=$),yt.prototype.event=function(t,e){this.active&&this.sink.event(t,e)},yt.prototype.end=function(t){this.active&&(h.tryDispose(t,this.disposable,this.sink),this.startNext(t,this.sink))},yt.prototype.startNext=function(e,n){try{this.disposable=this.continue(this.f,e,n)}catch(t){n.error(e,t)}},yt.prototype.continue=function(t,e,n){return Y(n,this.scheduler,K(e,t()))},yt.prototype.dispose=function(){return this.active=!1,this.disposable.dispose()},yt);function yt(t,e,n,r){n=dt.call(this,n)||this;return n.f=t,n.scheduler=r,n.active=!0,n.disposable=h.disposeOnce(e.run(n,r)),n}var mt=(kt.prototype.run=function(t,e){return this.source.run(new gt(this.p,t),e)},kt.create=function(t,e){return I(e)?e:e instanceof kt?new kt(Tt(e.p,t),e.source):new kt(t,e)},kt);function kt(t,e){this.p=t,this.source=e}var wt,gt=(e(bt,wt=$),bt.prototype.event=function(t,e){(0,this.p)(e)&&this.sink.event(t,e)},bt);function bt(t,e){e=wt.call(this,e)||this;return e.p=t,e}var Tt=function(e,n){return function(t){return e(t)&&n(t)}},At=(_t.prototype.run=function(t,e){return this.source.run(new Et(this.p,this.f,t),e)},_t);function _t(t,e,n){this.p=t,this.f=e,this.source=n}var xt,Et=(e(It,xt=$),It.prototype.event=function(t,e){var n=this.f;(0,this.p)(e)&&this.sink.event(t,n(e))},It);function It(t,e,n){n=xt.call(this,n)||this;return n.p=t,n.f=e,n}var Pt=(Dt.prototype.run=function(t,e){return this.source.run(new Ct(this.f,t),e)},Dt.create=function(t,e){return I(e)?M:e instanceof Dt?new Dt(i.compose(t,e.f),e.source):e instanceof mt?new At(e.p,t,e.source):new Dt(t,e)},Dt);function Dt(t,e){this.f=t,this.source=e}var Mt,Ct=(e(Rt,Mt=$),Rt.prototype.event=function(t,e){var n=this.f;this.sink.event(t,n(e))},Rt);function Rt(t,e){e=Mt.call(this,e)||this;return e.f=t,e}function Ot(t,e){return Pt.create(t,e)}var Nt=(Bt.prototype.run=function(t,e){return this.source.run(new qt(this.f,t),e)},Bt);function Bt(t,e){this.source=e,this.f=t}var St,qt=(e(jt,St=$),jt.prototype.event=function(t,e){(0,this.f)(e),this.sink.event(t,e)},jt);function jt(t,e){e=St.call(this,e)||this;return e.f=t,e}var Lt,Vt=(e(Wt,Lt=$),Wt.prototype.event=function(t,e){this.active&&(this.value=e,this.sink.event(t,this))},Wt.prototype.end=function(t){this.active&&(this.active=!1,this.sink.event(t,this))},Wt);function Wt(t,e){e=Lt.call(this,e)||this;return e.index=t,e.active=!0,e.value=void 0,e}function Ft(t,e){switch(e.length){case 0:return t();case 1:return t(e[0]);case 2:return t(e[0],e[1]);case 3:return t(e[0],e[1],e[2]);case 4:return t(e[0],e[1],e[2],e[3]);case 5:return t(e[0],e[1],e[2],e[3],e[4]);default:return t.apply(void 0,e)}}function Ht(t,e,n){return zt(t,[e,n])}var zt=function(t,e){return 0===e.length||P(e)?M:1===e.length?Ot(t,e[0]):new Ut(t,e)},Ut=(Yt.prototype.run=function(t,e){for(var n,r=this.sources.length,i=new Array(r),s=new Array(r),o=new Jt(i,s.length,t,this.f),u=0;u<r;++u)n=s[u]=new Vt(u,o),i[u]=this.sources[u].run(n,e);return h.disposeAll(i)},Yt);function Yt(t,e){this.f=t,this.sources=e}var Gt,Jt=(e(Kt,Gt=$),Kt.prototype.event=function(t,e){var n,r;e.active?(n=e.index,r=this.updateReady(n),this.values[n]=e.value,0===r&&this.sink.event(t,Ft(this.f,this.values))):this.dispose(t,e.index)},Kt.prototype.updateReady=function(t){return 0<this.awaiting&&(this.hasValue[t]||(this.hasValue[t]=!0,--this.awaiting)),this.awaiting},Kt.prototype.dispose=function(t,e){h.tryDispose(t,this.disposables[e],this.sink),0==--this.activeCount&&this.sink.end(t)},Kt);function Kt(t,e,n,r){n=Gt.call(this,n)||this;return n.disposables=t,n.f=r,n.awaiting=e,n.values=new Array(e),n.hasValue=new Array(e).fill(!1),n.activeCount=e,n}function Qt(t,e){return Xt(i.id,t,e)}var Xt=function(t,e,n){return I(n)?M:new Zt(t,e,n)},Zt=($t.prototype.run=function(t,e){return new te(this.f,this.concurrency,this.source,t,e)},$t);function $t(t,e,n){this.f=t,this.concurrency=e,this.source=n}var te=(ee.prototype.event=function(t,e){this.addInner(t,e)},ee.prototype.addInner=function(t,e){this.current.length<this.concurrency?this.startInner(t,e):this.pending.push(e)},ee.prototype.startInner=function(e,t){try{this.initInner(e,t)}catch(t){this.error(e,t)}},ee.prototype.initInner=function(t,e){var n=new re(t,this,this.sink);n.disposable=ne(this.f,t,e,n,this.scheduler),this.current.push(n)},ee.prototype.end=function(t){this.active=!1,h.tryDispose(t,this.disposable,this.sink),this.checkEnd(t)},ee.prototype.error=function(t,e){this.active=!1,this.sink.error(t,e)},ee.prototype.dispose=function(){this.active=!1,this.pending.length=0,this.disposable.dispose(),h.disposeAll(this.current).dispose()},ee.prototype.endInner=function(t,e){var n=this.current.indexOf(e);0<=n&&this.current.splice(n,1),h.tryDispose(t,e,this);e=this.pending;0<e.length?this.startInner(t,e.shift()):this.checkEnd(t)},ee.prototype.checkEnd=function(t){this.active||0!==this.current.length||this.sink.end(t)},ee);function ee(t,e,n,r,i){this.f=t,this.concurrency=e,this.sink=r,this.scheduler=i,this.pending=[],this.current=[],this.disposable=h.disposeOnce(n.run(this,i)),this.active=!0}var ne=function(t,e,n,r,i){return t(n).run(r,o.schedulerRelativeTo(e,i))},re=(ie.prototype.event=function(t,e){this.sink.event(t+this.time,e)},ie.prototype.end=function(t){this.outer.endInner(t+this.time,this)},ie.prototype.error=function(t,e){this.outer.error(t+this.time,e)},ie.prototype.dispose=function(){return this.disposable.dispose()},ie);function ie(t,e,n){this.time=t,this.outer=e,this.sink=n,this.disposable=h.disposeNone()}function se(t){return Qt(1/0,t)}function oe(t){return ue(ce(t))}var ue=function(t){return 0===t.length?M:1===t.length?t[0]:new pe(i.reduce(ae,[],t))},ce=function(t){return t.filter(he)},he=function(t){return!I(t)},ae=function(t,e){return t.concat(e instanceof pe?e.sources:e)},pe=(fe.prototype.run=function(t,e){for(var n,r=this.sources.length,i=new Array(r),s=new Array(r),o=new de(i,s,t),u=0;u<r;++u)n=s[u]=new Vt(u,o),i[u]=this.sources[u].run(n,e);return h.disposeAll(i)},fe);function fe(t){this.sources=t}var le,de=(e(ve,le=$),ve.prototype.event=function(t,e){e.active?this.sink.event(t,e.value):this.dispose(t,e.index)},ve.prototype.dispose=function(t,e){h.tryDispose(t,this.disposables[e],this.sink),0==--this.activeCount&&this.sink.end(t)},ve);function ve(t,e,n){n=le.call(this,n)||this;return n.disposables=t,n.activeCount=e.length,n}var ye=function(t,e,n){return I(n)||I(e)?M:new me(t,e,n)},me=(ke.prototype.run=function(t,e){var n=new ge(this.f,t),t=this.values.run(n.latest,e),e=this.sampler.run(n,e);return h.disposeBoth(e,t)},ke);function ke(t,e,n){this.f=t,this.values=e,this.sampler=n}var we,ge=(e(be,we=$),be.prototype.event=function(t,e){var n;this.latest.hasValue&&(n=this.f,this.sink.event(t,n(this.latest.value,e)))},be);function be(t,e){e=we.call(this,e)||this;return e.f=t,e.latest=new Ae(e),e}var Te,Ae=(e(_e,Te=$),_e.prototype.event=function(t,e){this.value=e,this.hasValue=!0},_e.prototype.end=function(){},_e);function _e(t){t=Te.call(this,t)||this;return t.hasValue=!1,t}function xe(t,e){return{min:t=Math.max(0,t),max:Math.max(t,e)}}function Ee(t,e){return Ie(0,t,e)}var Ie=function(t,e,n){return Pe(xe(t,e),n)},Pe=function(t,e){return De(t,e)?M:(e instanceof Pt?Ce:e instanceof Oe?Re:Me)(t,e)},De=function(t,e){return I(e)||(t=t).min>=t.max},Me=function(t,e){return(n=t).min<=0&&n.max===1/0?e:new Oe(t,e);var n},Ce=function(t,e){return Pt.create(e.f,Pe(t,e.source))},Re=function(t,e){return Pe((n=e.bounds,t=t,xe(n.min+t.min,Math.min(n.max,n.min+t.max))),e.source);var n},Oe=(Ne.prototype.run=function(t,e){var n=new W,t=new Se(this.bounds.min,this.bounds.max-this.bounds.min,t,n);return n.setDisposable(this.source.run(t,e)),n},Ne);function Ne(t,e){this.source=e,this.bounds=t}var Be,Se=(e(qe,Be=$),qe.prototype.event=function(t,e){0<this.skip?--this.skip:0!==this.take&&(--this.take,this.sink.event(t,e),0===this.take&&(this.disposable.dispose(),this.sink.end(t)))},qe);function qe(t,e,n,r){n=Be.call(this,n)||this;return n.skip=t,n.take=e,n.disposable=r,n}var je=(Le.prototype.run=function(t,e){var n=new W,t=new We(this.p,t,n);return n.setDisposable(this.source.run(t,e)),n},Le);function Le(t,e){this.p=t,this.source=e}var Ve,We=(e(Fe,Ve=$),Fe.prototype.event=function(t,e){var n;this.active&&(n=this.p,this.active=n(e),this.active?this.sink.event(t,e):(this.disposable.dispose(),this.sink.end(t)))},Fe);function Fe(t,e,n){e=Ve.call(this,e)||this;return e.p=t,e.active=!0,e.disposable=n,e}var He=(ze.prototype.run=function(t,e){return this.source.run(new Ye(this.p,t),e)},ze);function ze(t,e){this.p=t,this.source=e}var Ue,Ye=(e(Ge,Ue=$),Ge.prototype.event=function(t,e){if(this.skipping){var n=this.p;if(this.skipping=n(e),this.skipping)return}this.sink.event(t,e)},Ge);function Ge(t,e){e=Ue.call(this,e)||this;return e.p=t,e.skipping=!0,e}var Je=(Ke.prototype.run=function(t,e){return this.source.run(new Xe(this.p,t),e)},Ke);function Ke(t,e){this.p=t,this.source=e}var Qe,Xe=(e(Ze,Qe=$),Ze.prototype.event=function(t,e){var n;this.skipping||(n=this.p,this.skipping=n(e),this.sink.event(t,e),this.skipping&&this.sink.end(t))},Ze);function Ze(t,e){e=Qe.call(this,e)||this;return e.p=t,e.skipping=!1,e}var $e=function(t,e,n){return I(n)||0===e.length?M:new en(t,e,Ee(e.length,n))},tn=function(t){return t},en=(nn.prototype.run=function(t,e){return this.source.run(new sn(this.f,this.items,t),e)},nn);function nn(t,e,n){this.f=t,this.items=e,this.source=n}var rn,sn=(e(on,rn=$),on.prototype.event=function(t,e){var n=this.f;this.sink.event(t,n(this.items[this.index],e)),this.index+=1},on);function on(t,e,n){n=rn.call(this,n)||this;return n.f=t,n.items=e,n.index=0,n}var un=(cn.prototype.push=function(t){var e=this.tail;return this.list[e]=t,this.tail=e+1&this.capacityMask,this.tail===this.head&&this.growArray(),this.head<this.tail?this.tail-this.head:this.capacityMask+1-(this.head-this.tail)},cn.prototype.shift=function(){var t=this.head;if(t!==this.tail){var e=this.list[t];return this.list[t]=void 0,this.head=t+1&this.capacityMask,t<2&&1e4<this.tail&&this.tail<=this.list.length>>>2&&this.shrinkArray(),e}},cn.prototype.isEmpty=function(){return this.head===this.tail},cn.prototype.length=function(){return this.head===this.tail?0:this.head<this.tail?this.tail-this.head:this.capacityMask+1-(this.head-this.tail)},cn.prototype.growArray=function(){this.head&&(this.list=this.copyArray(),this.head=0),this.tail=this.list.length,this.list.length*=2,this.capacityMask=this.capacityMask<<1|1},cn.prototype.shrinkArray=function(){this.list.length>>>=1,this.capacityMask>>>=1},cn.prototype.copyArray=function(){for(var t=[],e=this.list,n=e.length,r=this.head;r<n;r++)t.push(e[r]);for(r=0;r<this.tail;r++)t.push(e[r]);return t},cn);function cn(){this.head=0,this.tail=0,this.capacityMask=3,this.list=new Array(4)}function hn(t,e){return 0===e.length||P(e)?M:1===e.length?Ot(t,e[0]):new an(t,e)}var an=(pn.prototype.run=function(t,e){for(var n,r=this.sources.length,i=new Array(r),s=new Array(r),o=new Array(r),u=new ln(this.f,o,s,t),c=0;c<r;++c)o[c]=new un,n=s[c]=new Vt(c,u),i[c]=this.sources[c].run(n,e);return h.disposeAll(i)},pn);function pn(t,e){this.f=t,this.sources=e}var fn,ln=(e(dn,fn=$),dn.prototype.event=function(t,e){var n,r;e.active?((r=(n=this.buffers)[e.index]).push(e.value),1!==r.length()||function(t){for(var e=0,n=t.length;e<n;++e)if(t[e].isEmpty())return!1;return!0}(n)&&(vn(this.f,t,n,this.sink),function(t,e){for(var n=0,r=t.length;n<r;++n)if(t[n].isEmpty()&&!e[n].active)return!0;return!1}(this.buffers,this.sinks)&&this.sink.end(t))):this.dispose(t,e.index)},dn.prototype.dispose=function(t,e){this.buffers[e].isEmpty()&&this.sink.end(t)},dn);function dn(t,e,n,r){r=fn.call(this,r)||this;return r.f=t,r.sinks=n,r.buffers=e,r}var vn=function(t,e,n,r){return r.event(e,Ft(t,i.map(yn,n)))},yn=function(t){return t.shift()};var mn=(kn.prototype.run=function(t,e){t=new wn(t,e);return h.disposeBoth(t,this.source.run(t,e))},kn);function kn(t){this.source=t}var wn=(gn.prototype.event=function(t,e){this.disposeCurrent(t),this.current=new bn(e,t,1/0,this,this.sink,this.scheduler)},gn.prototype.end=function(t){this.ended=!0,this.checkEnd(t)},gn.prototype.error=function(t,e){this.ended=!0,this.sink.error(t,e)},gn.prototype.dispose=function(){return this.disposeCurrent(o.currentTime(this.scheduler))},gn.prototype.disposeCurrent=function(t){if(null!==this.current)return this.current.dispose(t)},gn.prototype.disposeInner=function(t,e){e.dispose(t),e===this.current&&(this.current=null)},gn.prototype.checkEnd=function(t){this.ended&&null===this.current&&this.sink.end(t)},gn.prototype.endInner=function(t,e){this.disposeInner(t,e),this.checkEnd(t)},gn.prototype.errorInner=function(t,e,n){this.disposeInner(t,n),this.sink.error(t,e)},gn);function gn(t,e){this.sink=t,this.scheduler=e,this.current=null,this.ended=!1}var bn=(Tn.prototype.event=function(t,e){t=Math.max(0,t+this.min);t<this.max&&this.sink.event(t,e)},Tn.prototype.end=function(t){this.outer.endInner(t+this.min,this)},Tn.prototype.error=function(t,e){this.outer.errorInner(t+this.min,e,this)},Tn.prototype.dispose=function(t){h.tryDispose(t,this.disposable,this.sink)},Tn);function Tn(t,e,n,r,i,s){this.min=e,this.max=n,this.outer=r,this.sink=i,this.disposable=t.run(this,o.schedulerRelativeTo(e,s))}var An=function(t,e){return I(e)?M:new _n(t,e)},_n=(xn.prototype.run=function(t,e){return this.source.run(new In(this.equals,t),e)},xn);function xn(t,e){this.equals=t,this.source=e}var En,In=(e(Pn,En=$),Pn.prototype.event=function(t,e){this.init?(this.init=!1,this.value=e,this.sink.event(t,e)):this.equals(this.value,e)||(this.value=e,this.sink.event(t,e))},Pn);function Pn(t,e){e=En.call(this,e)||this;return e.equals=t,e.value=void 0,e.init=!0,e}function Dn(t,e){return t===e}function Mn(t,e){return new Rn(t,e)}function Cn(t,e){return new Nn(t,e)}var Rn=(On.prototype.run=function(t,e){var n=new W,r=this.source.run(t,e),e=this.maxSignal.run(new Hn(t,n),e);return n.setDisposable(h.disposeBoth(r,e)),n},On);function On(t,e){this.maxSignal=t,this.source=e}var Nn=(Bn.prototype.run=function(t,e){var n=new Vn(this.minSignal,t,e),e=this.source.run(new qn(n,t),e);return h.disposeBoth(n,e)},Bn);function Bn(t,e){this.minSignal=t,this.source=e}var Sn,qn=(e(jn,Sn=$),jn.prototype.event=function(t,e){this.min.allow&&this.sink.event(t,e)},jn);function jn(t,e){e=Sn.call(this,e)||this;return e.min=t,e}var Ln,Vn=(e(Wn,Ln=$),Wn.prototype.event=function(){this.allow=!0,this.dispose()},Wn.prototype.end=function(){},Wn.prototype.dispose=function(){this.disposable.dispose()},Wn);function Wn(t,e,n){e=Ln.call(this,e)||this;return e.allow=!1,e.disposable=t.run(e,n),e}var Fn,Hn=(e(zn,Fn=$),zn.prototype.event=function(t){this.disposable.dispose(),this.sink.end(t)},zn.prototype.end=function(){},zn);function zn(t,e){t=Fn.call(this,t)||this;return t.disposable=e,t}var Un=(Yn.prototype.run=function(t,e){t=new Jn(this.dt,t,e);return h.disposeBoth(t,this.source.run(t,e))},Yn);function Yn(t,e){this.dt=t,this.source=e}var Gn,Jn=(e(Kn,Gn=$),Kn.prototype.dispose=function(){this.tasks.forEach(o.cancelTask)},Kn.prototype.event=function(t,e){this.tasks.push(o.delay(this.dt,c(e,this.sink),this.scheduler))},Kn.prototype.end=function(){this.tasks.push(o.delay(this.dt,a(this.sink),this.scheduler))},Kn);function Kn(t,e,n){e=Gn.call(this,e)||this;return e.dt=t,e.scheduler=n,e.tasks=[],e}function Qn(t,e){return I(e)?M:e instanceof Pt?Xn(t,e):e instanceof $n?Zn(t,e):new $n(t,e)}var Xn=function(t,e){return Pt.create(e.f,Qn(t,e.source))},Zn=function(t,e){return new $n(Math.max(t,e.period),e.source)},$n=(tr.prototype.run=function(t,e){return this.source.run(new nr(this.period,t),e)},tr);function tr(t,e){this.period=t,this.source=e}var er,nr=(e(rr,er=$),rr.prototype.event=function(t,e){t>=this.time&&(this.time=t+this.period,this.sink.event(t,e))},rr);function rr(t,e){e=er.call(this,e)||this;return e.time=0,e.period=t,e}var ir=(sr.prototype.run=function(t,e){return new or(this.dt,this.source,t,e)},sr);function sr(t,e){this.dt=t,this.source=e}var or=(ur.prototype.event=function(t,e){this.clearTimer(),this.value=e,this.timer=o.delay(this.dt,new cr(this,e),this.scheduler)},ur.prototype.handleEventFromTask=function(t,e){this.clearTimer(),this.sink.event(t,e)},ur.prototype.end=function(t){this.clearTimer()&&(this.sink.event(t,this.value),this.value=void 0),this.sink.end(t)},ur.prototype.error=function(t,e){this.clearTimer(),this.sink.error(t,e)},ur.prototype.dispose=function(){this.clearTimer(),this.disposable.dispose()},ur.prototype.clearTimer=function(){return null!==this.timer&&(this.timer.dispose(),!(this.timer=null))},ur);function ur(t,e,n,r){this.dt=t,this.sink=n,this.scheduler=r,this.timer=null,this.disposable=e.run(this,r)}var cr=(hr.prototype.run=function(t){this.sink.handleEventFromTask(t,this.value)},hr.prototype.error=function(t,e){this.sink.error(t,e)},hr.prototype.dispose=function(){},hr);function hr(t,e){this.sink=t,this.value=e}function ar(t){return I(t)?M:new pr(t)}var pr=(fr.prototype.run=function(t,e){return this.source.run(new lr(t,e),e)},fr);function fr(t){this.source=t}var lr=(dr.prototype.event=function(t,e){var n=this;this.queue=this.queue.then(function(){return n.handlePromise(e)}).catch(this.errorBound)},dr.prototype.end=function(){this.queue=this.queue.then(this.endBound).catch(this.errorBound)},dr.prototype.error=function(t,e){var n=this;this.queue=this.queue.then(function(){return n.errorBound(e)}).catch(s)},dr.prototype.handlePromise=function(t){return t.then(this.eventBound)},dr);function dr(t,e){var n=this;this.eventBound=function(t){return n.sink.event(o.currentTime(n.scheduler),t)},this.endBound=function(){return n.sink.end(o.currentTime(n.scheduler))},this.errorBound=function(t){return n.sink.error(o.currentTime(n.scheduler),t)},this.sink=t,this.scheduler=e,this.queue=Promise.resolve()}var vr=(yr.prototype.event=function(t,e){this.active&&this.sink.event(t,e)},yr.prototype.end=function(t){this.active&&(this.disable(),this.sink.end(t))},yr.prototype.error=function(t,e){this.disable(),this.sink.error(t,e)},yr.prototype.disable=function(){return this.active=!1,this.sink},yr);function yr(t){this.sink=t,this.active=!0}function mr(e,t,n){try{n.event(e,t)}catch(t){n.error(e,t)}}function kr(e,n){try{n.end(e)}catch(t){n.error(e,t)}}var wr=(gr.prototype.run=function(t,e){return o.asap(p(this.value,t),e)},gr);function gr(t){this.value=t}var br=(Tr.prototype.run=function(t,e){return new Ar(this.f,this.source,t,e)},Tr);function Tr(t,e){this.f=t,this.source=e}var Ar=(_r.prototype.event=function(t,e){mr(t,e,this.sink)},_r.prototype.end=function(t){kr(t,this.sink)},_r.prototype.error=function(t,e){var n=this.sink.disable();h.tryDispose(t,this.disposable,this.sink),this._startNext(t,e,n)},_r.prototype._startNext=function(e,t,n){try{this.disposable=this._continue(this.f,e,t,n)}catch(t){n.error(e,t)}},_r.prototype._continue=function(t,e,n,r){return Y(r,this.scheduler,K(e,t(n)))},_r.prototype.dispose=function(){return this.disposable.dispose()},_r);function _r(t,e,n,r){this.f=t,this.sink=new vr(n),this.scheduler=r,this.disposable=e.run(this,r)}var xr=(Er.prototype.run=function(t,e){return this.source.run(t,e)},Er);function Er(t){this.source=new Ir(t)}var Ir=(Pr.prototype.run=function(t,e){return 1===this.add(t)&&(this.disposable=this.source.run(this,e)),h.disposeOnce(new Dr(this,t))},Pr.prototype.dispose=function(){var t=this.disposable;return this.disposable=h.disposeNone(),t.dispose()},Pr.prototype.add=function(t){return this.sinks=i.append(t,this.sinks),this.sinks.length},Pr.prototype.remove=function(t){t=i.findIndex(t,this.sinks);return 0<=t&&(this.sinks=i.remove(t,this.sinks)),this.sinks.length},Pr.prototype.event=function(t,e){var n=this.sinks;if(1===n.length)return n[0].event(t,e);for(var r=0;r<n.length;++r)mr(t,e,n[r])},Pr.prototype.end=function(t){for(var e=this.sinks,n=0;n<e.length;++n)kr(t,e[n])},Pr.prototype.error=function(t,e){for(var n=this.sinks,r=0;r<n.length;++r)n[r].error(t,e)},Pr);function Pr(t){this.source=t,this.sinks=[],this.disposable=h.disposeNone()}var Dr=(Mr.prototype.dispose=function(){0===this.source.remove(this.sink)&&this.source.dispose()},Mr);function Mr(t,e){this.source=t,this.sink=e}var Cr=i.curry3(Y),Rr=i.curry2(K),Or=i.curry3(function(t,e,n){return I(n)?M:new et(t,e,n)}),Nr=i.curry3(function(t,e,n){return new ot(t,e,n)}),Br=i.curry2(function(t,e){return pt(function(){return e},q(t))}),Sr=i.curry2(Ot),qr=i.curry2(function(t,e){return Ot(function(){return t},e)}),jr=i.curry2(function(t,e){return new Nt(t,e)}),Lr=i.curry2(function(t,e){return Ht(i.apply,t,e)}),Vr=i.curry2(function(t,e){return Xt(t,1/0,e)}),Wr=i.curry2(pt),Fr=i.curry2(function(t,e){return Xt(t,1,e)}),Hr=i.curry2(Qt),zr=i.curry3(Xt),Ur=i.curry2(function(t,e){return oe([t,e])}),Yr=i.curry3(Ht),Gr=i.curry2(zt),Jr=i.curry2(function(t,e){return ye(function(t){return t},t,e)}),Kr=i.curry3(ye),Qr=i.curry3($e),Xr=i.curry2(function(t,e){return $e(tn,t,e)}),Zr=i.curry3(function(t,e,n){return hn(t,[e,n])}),$r=i.curry2(hn),ti=i.curry2(function(t,e){return mt.create(t,e)}),ei=i.curry2(An),ni=i.curry2(Ee),ri=i.curry2(function(t,e){return Ie(t,1/0,e)}),ii=i.curry3(Ie),si=i.curry2(function(t,e){return I(e)?M:new je(t,e)}),oi=i.curry2(function(t,e){return I(e)?M:new He(t,e)}),ui=i.curry2(function(t,e){return I(e)?M:new Je(t,e)}),ci=i.curry2(Mn),hi=i.curry2(Cn),ai=i.curry2(function(t,e){return Mn(se(t),Cn(t,e))}),pi=i.curry2(function(t,e){return t<=0?e:new Un(t,e)}),fi=i.curry2(Qn),li=i.curry2(function(t,e){return I(e)?M:new ir(t,e)}),di=i.curry2(function(t,e){return I(e)?M:new br(t,e)}),vi=i.curry3(u),f=i.curry2(c),$=i.curry2(p);t.MulticastSource=Ir,t.ap=Lr,t.at=R,t.awaitPromises=ar,t.chain=Vr,t.combine=Yr,t.combineArray=Gr,t.concatMap=Fr,t.constant=qr,t.continueWith=Wr,t.debounce=li,t.delay=pi,t.during=ai,t.empty=E,t.filter=ti,t.fromPromise=function(t){return ar(q(t))},t.join=se,t.loop=Or,t.map=Sr,t.merge=Ur,t.mergeArray=oe,t.mergeConcurrently=Hr,t.mergeMapConcurrently=zr,t.multicast=function(t){return t instanceof xr||I(t)?t:new xr(t)},t.never=function(){return O},t.newStream=function(t){return new V(t)},t.now=q,t.periodic=function(t){return new j(t)},t.propagateEndTask=a,t.propagateErrorTask=$,t.propagateEventTask=f,t.propagateTask=vi,t.recoverWith=di,t.run=Cr,t.runEffects=H,t.sample=Jr,t.scan=Nr,t.since=hi,t.skip=ri,t.skipAfter=ui,t.skipRepeats=function(t){return An(Dn,t)},t.skipRepeatsWith=ei,t.skipWhile=oi,t.slice=ii,t.snapshot=Kr,t.startWith=Br,t.switchLatest=function(t){return I(t)?M:new mn(t)},t.take=ni,t.takeWhile=si,t.tap=jr,t.throttle=fi,t.throwError=function(t){return new wr(t)},t.until=ci,t.withItems=Xr,t.withLocalTime=Rr,t.zip=Zr,t.zipArray=$r,t.zipItems=Qr,Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof n&&void 0!==e?i(n,t("@most/prelude"),t("@most/scheduler"),t("@most/disposable")):"function"==typeof define&&define.amd?define(["exports","@most/prelude","@most/scheduler","@most/disposable"],i):i((r=r||self).mostCore={},r.mostPrelude,r.mostScheduler,r.mostDisposable)},{"@most/disposable":4,"@most/prelude":5,"@most/scheduler":6}],4:[function(t,e,n){var r,i;r=this,i=function(t,n){"use strict";function e(){return r}var r=(i.prototype.dispose=function(){},new i);function i(){}function s(t){return t===r}function o(t){return new u(t)}var u=(c.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.disposable&&(this.disposable.dispose(),this.disposable=void 0))},c);function c(t){this.disposed=!1,this.disposable=t}var h=n.curry2(function(t,e){return o(new a(t,e))}),a=(p.prototype.dispose=function(){this._dispose(this._resource)},p);function p(t,e){this._dispose=t,this._resource=e}function f(t){return 0===(t=n.reduce(d,[],t)).length?r:new v(t)}var l=n.curry2(function(t,e){return f([t,e])}),d=function(t,e){return s(e)?t:e instanceof v?n.concat(t,e.disposables):n.append(e,t)},v=(y.prototype.dispose=function(){w(m(this.disposables))},y);function y(t){this.disposables=t}var m=function(t){return n.reduce(k,[],t)},k=function(e,t){try{t.dispose()}catch(t){e.push(t)}return e},w=function(t){if(0<t.length)throw new g(t.length+" errors",t)},g=function t(e,n){this.name="DisposeAllError",this.message=e,this.errors=n,Error.call(this,e),Error.captureStackTrace&&Error.captureStackTrace(this,t),this.stack=""+this.stack+b(this.errors)};g.prototype=Object.create(Error.prototype);var b=function(t){return n.reduce(T,"",t)},T=function(t,e,n){return t+("\n["+(n+1)+"] "+e.stack)},A=n.curry3(function(e,t,n){try{t.dispose()}catch(t){n.error(e,t)}});t.DisposeAllError=g,t.dispose=function(t){return t.dispose()},t.disposeAll=f,t.disposeBoth=l,t.disposeNone=e,t.disposeOnce=o,t.disposeWith=h,t.isDisposeNone=s,t.tryDispose=A,Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof n&&void 0!==e?i(n,t("@most/prelude")):"function"==typeof define&&define.amd?define(["exports","@most/prelude"],i):i((r=r||self).mostDisposable={},r.mostPrelude)},{"@most/prelude":5}],5:[function(t,e,n){var r,i;r=this,i=function(t){"use strict";function e(t,e){if(t<0)throw new TypeError("n must be >= 0");var n=e.length;return 0===t||0===n?e:n<=t?[]:function(t,e,n){for(var r=new Array(n),i=0;i<n;++i)r[i]=e[t+i];return r}(t,e,n-t)}function o(r){return function t(e,n){switch(arguments.length){case 0:return t;case 1:return function(t){return r(e,t)};default:return r(e,n)}}}function u(i){return function t(n,e,r){switch(arguments.length){case 0:return t;case 1:return o(function(t,e){return i(n,t,e)});case 2:return function(t){return i(n,e,t)};default:return i(n,e,r)}}}t.append=function(t,e){for(var n=e.length,r=new Array(n+1),i=0;i<n;++i)r[i]=e[i];return r[n]=t,r},t.apply=function(t,e){return t(e)},t.compose=function(e,n){return function(t){return e(n(t))}},t.concat=function(t,e){for(var n=t.length,r=e.length,i=new Array(n+r),s=0,s=0;s<n;s++)i[s]=t[s];for(var o=0;o<r;o++)i[s++]=e[o];return i},t.cons=function(t,e){var n=e.length,r=new Array(n+1);r[0]=t;for(var i=0;i<n;++i)r[i+1]=e[i];return r},t.copy=function(t){for(var e=t.length,n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n},t.curry2=o,t.curry3=u,t.curry4=function(s){return function t(r,n,e,i){switch(arguments.length){case 0:return t;case 1:return u(function(t,e,n){return s(r,t,e,n)});case 2:return o(function(t,e){return s(r,n,t,e)});case 3:return function(t){return s(r,n,e,t)};default:return s(r,n,e,i)}}},t.drop=e,t.findIndex=function(t,e){for(var n=0,r=e.length;n<r;++n)if(t===e[n])return n;return-1},t.id=function(t){return t},t.isArrayLike=function(t){return null!=t&&"number"==typeof t.length&&"function"!=typeof t},t.map=function(t,e){for(var n=e.length,r=new Array(n),i=0;i<n;++i)r[i]=t(e[i]);return r},t.reduce=function(t,e,n){for(var r=e,i=0,s=n.length;i<s;++i)r=t(r,n[i],i);return r},t.remove=function(t,e){if(t<0)throw new TypeError("i must be >= 0");var n=e.length;return 0===n||n<=t?e:1===n?[]:function(t,e,n){var r,i=new Array(n);for(r=0;r<t;++r)i[r]=e[r];for(r=t;r<n;++r)i[r]=e[r+1];return i}(t,e,n-1)},t.removeAll=function(t,e){for(var n,r=e.length,i=new Array(r),s=0,o=0;o<r;++o)t(n=e[o])||(i[s]=n,++s);return i.length=s,i},t.replace=function(t,e,n){if(e<0)throw new TypeError("i must be >= 0");for(var r=n.length,i=new Array(r),s=0;s<r;++s)i[s]=e===s?t:n[s];return i},t.tail=function(t){return e(1,t)},Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof n&&void 0!==e?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i((r=r||self).mostPrelude={})},{}],6:[function(n,r,i){(function(B){(function(){var t,e;t=this,e=function(t,i){"use strict";var s=(e.prototype.run=function(){return this.task.run(this.time-this.localOffset)},e.prototype.error=function(t){return this.task.error(this.time-this.localOffset,t)},e.prototype.dispose=function(){return this.active=!1,this.scheduler.cancel(this),this.task.dispose()},e);function e(t,e,n,r,i){this.time=t,this.localOffset=e,this.period=n,this.task=r,this.scheduler=i,this.active=!0}var n=(r.prototype.currentTime=function(){return this.scheduler.currentTime()-this.origin},r.prototype.scheduleTask=function(t,e,n,r){return this.scheduler.scheduleTask(t+this.origin,e,n,r)},r.prototype.relative=function(t){return new r(t+this.origin,this.scheduler)},r.prototype.cancel=function(t){return this.scheduler.cancel(t)},r.prototype.cancelAll=function(t){return this.scheduler.cancelAll(t)},r);function r(t,e){this.origin=t,this.scheduler=e}function o(e){try{return e.run()}catch(t){return e.error(t)}}var u=(c.prototype.currentTime=function(){return this.timer.now()},c.prototype.scheduleTask=function(t,e,n,r){e=this.currentTime()+Math.max(0,e),r=new s(e,t,n,r,this);return this.timeline.add(r),this._scheduleNextRun(),r},c.prototype.relative=function(t){return new n(t,this)},c.prototype.cancel=function(t){t.active=!1,this.timeline.remove(t)&&this._reschedule()},c.prototype.cancelAll=function(t){this.timeline.removeAll(t),this._reschedule()},c.prototype._reschedule=function(){this.timeline.isEmpty()?this._unschedule():this._scheduleNextRun()},c.prototype._unschedule=function(){this.timer.clearTimer(this._timer),this._timer=null},c.prototype._scheduleNextRun=function(){var t;this.timeline.isEmpty()||(t=this.timeline.nextArrival(),null===this._timer?this._scheduleNextArrival(t):t<this._nextArrival&&(this._unschedule(),this._scheduleNextArrival(t)))},c.prototype._scheduleNextArrival=function(t){this._nextArrival=t;t=Math.max(0,t-this.currentTime());this._timer=this.timer.setTimer(this._runReadyTasksBound,t)},c.prototype._runReadyTasks=function(){this._timer=null,this.timeline.runTasks(this.currentTime(),o),this._scheduleNextRun()},c);function c(t,e){var n=this;this._runReadyTasksBound=function(){return n._runReadyTasks()},this.timer=t,this.timeline=e,this._timer=null,this._nextArrival=1/0}var h=(a.prototype.nextArrival=function(){return this.isEmpty()?1/0:this.tasks[0].time},a.prototype.isEmpty=function(){return 0===this.tasks.length},a.prototype.add=function(t){p(t,this.tasks)},a.prototype.remove=function(t){var e=l(f(t),this.tasks);if(0<=e&&e<this.tasks.length){var n=this.tasks[e].events,t=i.findIndex(t,n);if(0<=t)return n.splice(t,1),0===n.length&&this.tasks.splice(e,1),!0}return!1},a.prototype.removeAll=function(t){for(var e,n,r=0;r<this.tasks.length;++r)e=t,(n=this.tasks[r]).events=i.removeAll(e,n.events)},a.prototype.runTasks=function(t,e){for(var n=this.tasks,r=n.length,i=0;i<r&&n[i].time<=t;)++i;this.tasks=n.slice(i);for(var s=0;s<i;++s)this.tasks=function(t,e,n){for(var r=0;r<e.length;++r){var i=e[r];i.active&&(t(i),0<=i.period&&i.active&&(i.time=i.time+i.period,p(i,n)))}return n}(e,n[s].events,this.tasks)},a);function a(){this.tasks=[]}function p(t,e){var n,r,i,s,o=e.length,u=f(t);0===o||o<=(s=l(u,e))?e.push(d(u,[t])):(n=t,i=u,s=(r=e)[o=s],i===s.time?function(t,e){0===e.length||t.time>=e[e.length-1].time?e.push(t):function(t,e){for(var n=0;n<e.length;n++)if(t.time<e[n].time){e.splice(n,0,t);break}}(t,e)}(n,s.events):r.splice(o,0,d(i,[n])))}function f(t){return Math.floor(t.time)}function l(t,e){for(var n,r,i=0,s=e.length;i<s;){if(t===(r=e[n=Math.floor((i+s)/2)]).time)return n;t<r.time?s=n:i=n+1}return s}var d=function(t,e){return{time:t,events:e}},v=(y.prototype.now=function(){return this._clock.now()},y.prototype.setTimer=function(t,e){return e<=0?function(t){t=new m(t);return function(t){Promise.resolve(t).then(o)}(t),t}(t):setTimeout(t,e)},y.prototype.clearTimer=function(t){return t instanceof m?t.cancel():clearTimeout(t)},y);function y(t){this._clock=t}var m=(k.prototype.run=function(){if(this.active)return this.f()},k.prototype.error=function(t){throw t},k.prototype.cancel=function(){this.active=!1},k);function k(t){this.f=t,this.active=!0}var w=(g.prototype.now=function(){return this.clock.now()-this.origin},g);function g(t,e){this.origin=e,this.clock=t}var b=(T.prototype.now=function(){var t=this.hrtime(this.origin);return(1e9*t[0]+t[1])/1e6},T);function T(t,e){this.origin=e,this.hrtime=t}function A(t){return new w(t,t.now())}function _(){return A(performance)}function x(){return A(Date)}function E(){return new b(B.hrtime,B.hrtime())}function I(){return("undefined"!=typeof performance&&"function"==typeof performance.now?_:void 0!==B&&"function"==typeof B.hrtime?E:x)()}var P=i.curry2(function(t,e){return e.scheduleTask(0,0,-1,t)}),D=i.curry3(function(t,e,n){return n.scheduleTask(0,t,-1,e)}),M=i.curry3(function(t,e,n){return n.scheduleTask(0,0,t,e)}),C=i.curry2(function(t,e){return console.warn("DEPRECATED cancelAllTasks to be removed in 2.0.0"),e.cancelAll(t)}),R=i.curry2(function(t,e){return new n(t,e)}),O=i.curry2(function(t,e){return new u(t,e)}),N=function(){return new v(I())};t.HRTimeClock=b,t.RelativeClock=w,t.asap=P,t.cancelAllTasks=C,t.cancelTask=function(t){return t.dispose()},t.clockRelativeTo=A,t.currentTime=function(t){return t.currentTime()},t.delay=D,t.newClockTimer=function(t){return new v(t)},t.newDateClock=x,t.newDefaultScheduler=function(){return new u(N(),new h)},t.newDefaultTimer=N,t.newHRTimeClock=E,t.newPerformanceClock=_,t.newPlatformClock=I,t.newScheduler=O,t.newTimeline=function(){return new h},t.periodic=M,t.schedulerRelativeTo=R,Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof i&&void 0!==r?e(i,n("@most/prelude")):"function"==typeof define&&define.amd?define(["exports","@most/prelude"],e):e((t=t||self).mostScheduler={},t.mostPrelude)}).call(this)}).call(this,n("_process"))},{"@most/prelude":5,_process:9}],7:[function(t,e,n){const u=t("@most/adapter");function c(t,e){e.on("open",function(){console.log("connection opened!"),e.on("data",t)}),e.on("error",console.error)}var h=r=>n=>new Promise((t,e)=>{n.on(r,t),n.on("error",e)});n.createNewPeer=t=>{var[e,r]=u.createAdapter(),i=new Peer(t);return h("open")(i).then(t=>{const n=h("connection")(i);return n.then(t=>c(e,t)),{messages:r,peerId:t,send:e=>n.then(t=>t.send(e))}})},n.connectToHost=({peerId:t,hostId:r})=>{var[i,s]=u.createAdapter();const o=new Peer(t);return h("open")(o).then(t=>{const e=o.connect(r);c(i,e);const n=h("open")(e);return{messages:s,peerId:t,send:t=>n.then(()=>e.send(t))}})}},{"@most/adapter":2}],8:[function(t,e,n){var r=t("@most/core");const i=t("@most/adapter");t=t("@most/scheduler");const h=new Promise((e,t)=>function t(){setTimeout(()=>{Boolean(YT)&&Boolean(YT.Player)?e(YT):t()},100)}());n.createPlayer=(s,o)=>{const[u,c]=i.createAdapter();return h.then(({Player:t})=>{var e,n,r,i,t=new t(s,{videoId:o,events:{onReady:()=>{},onStateChange:t=>{1===t.data&&u({type:"play"}),2===t.data&&u({type:"pause"})}}});return e=t,n=u,setInterval(function(){var t;e.getCurrentTime&&(r=r?(t=e.getCurrentTime(),1e3<1e3*Math.abs(t-r)&&n({type:"seek",value:t}),t):e.getCurrentTime())},500),{events:c,trigger:t=>{"pause"===t.type&&i.pauseVideo(),"play"===t.type&&i.playVideo(),"seek"===t.type&&i.seekTo(t.value)},_player:i=t}})},window.scheduler=t,window.most=r,window.adpater=i},{"@most/adapter":2,"@most/core":3,"@most/scheduler":6}],9:[function(t,e,n){var r,i,e=e.exports={};function s(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function u(e){if(r===setTimeout)return setTimeout(e,0);if((r===s||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:s}catch(t){r=s}try{i="function"==typeof clearTimeout?clearTimeout:o}catch(t){i=o}}();var c,h=[],a=!1,p=-1;function f(){a&&c&&(a=!1,c.length?h=c.concat(h):p=-1,h.length&&l())}function l(){if(!a){var t=u(f);a=!0;for(var e=h.length;e;){for(c=h,h=[];++p<e;)c&&c[p].run();p=-1,e=h.length}c=null,a=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===o||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function v(){}e.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];h.push(new d(t,e)),1!==h.length||a||u(l)},d.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={},e.on=v,e.addListener=v,e.once=v,e.off=v,e.removeListener=v,e.removeAllListeners=v,e.emit=v,e.prependListener=v,e.prependOnceListener=v,e.listeners=function(t){return[]},e.binding=function(t){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(t){throw new Error("process.chdir is not supported")},e.umask=function(){return 0}},{}]},{},[8,7,1]);
